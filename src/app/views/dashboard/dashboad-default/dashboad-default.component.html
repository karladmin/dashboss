<app-base-header headerText="{{'local.dash' | translate}}"></app-base-header>
<app-loader *ngIf="loading == true"></app-loader>
<div class="page-mt animate__animated animate__fadeInUp" [perfectScrollbar]="{ suppressScrollX: true }">
  <div class="card o-hidden mb-4" style="height: 205px">
    <div class="card-body bg-info d-flex flex-column justify-content-center" style="
        background-image: url('./assets/images/icons/ownerHome.png');
        background-position: 95% 0%;
        background-repeat: no-repeat;
      ">
      <h2 class="text-white">Hi {{profile?.name}}</h2>
      <h5 style="width: 50%" class="text-white">
        {{'local.welcome' | translate}}
      </h5>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-xl-3 col-lg-6">
      <div class="card card-stats mb-4 mb-xl-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h3 class="text-uppercase state-header mb-0">{{'das.apUs' | translate}}</h3>
              <span class="h5 mb-0 state-number">{{dashboardData?.app_user}}</span>
            </div>
            <div class="col-auto">
              <div class="icon icon-shape bg-success text-white rounded-circle">
                <i class="fas fa-users"></i>
              </div>
            </div>
          </div>
          <p class="mt-3 mb-0 state-header text-sm">
            <span class="text-danger mr-2"><i class="fa fa-ban"></i> {{dashboardData?.block_user}}</span>
            <span class="text-nowrap">{{'das.blcUsers' | translate}}</span>
          </p>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-lg-6">
      <div class="card card-stats mb-4 mb-xl-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h5 class="text-uppercase state-header mb-0">{{'das.totOwner' | translate}}</h5>
              <span class="h5 mb-0 state-number">{{dashboardData?.owner_tot}}</span>
            </div>
            <div class="col-auto">
              <div class="icon icon-shape bg-warning text-white rounded-circle">
                <i class="fas fa-chart-pie"></i>
              </div>
            </div>
          </div>
          <p class="mt-3 mb-0 state-header text-sm">
            <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> {{dashboardData?.unapproved_owner}}</span>
            <span class="text-nowrap">{{'das.unApprove' | translate}}</span>
          </p>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-lg-6">
      <div class="card card-stats mb-4 mb-xl-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h5 class="text-uppercase state-header mb-0">{{'das.bType' | translate}}</h5>
              <span class="h5 mb-0 state-number">{{dashboardData?.bus_type}}</span>
            </div>
            <div class="col-auto">
              <div class="icon icon-shape bg-danger text-white rounded-circle">
                <i class="fas fa-tools"></i>
              </div>
            </div>
          </div>
          <p class="mt-3 mb-0 state-header text-sm">
            <span class="text-nowrap">{{'das.prime' | translate}}</span>
          </p>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-lg-6">
      <div class="card card-stats mb-4 mb-xl-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h5 class="state-header text-uppercase mb-0">{{'das.sub' | translate}}</h5>
              <span class="h5 mb-0 state-number">{{settingData}}{{dashboardData?.sub_sales_amount}}</span>
            </div>
            <div class="col-auto">
              <div class="icon icon-shape bg-info text-white rounded-circle">
                <i class="fas fa-percent"></i>
              </div>
            </div>
          </div>
          <p class="mt-3 mb-0 state-header text-sm">
            <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> {{dashboardData?.sub_sales_count}}</span>
            <span class="text-nowrap">{{'das.subSales' | translate}}</span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="row mb-2">
    <div class="col-lg-6 col-md-12">
      <div class="card mb-4">
        <div class="card-body">
          <div class="card-title mb-0">{{'das.recentSales' | translate}}</div>
          <div echarts [options]="chartLineOption2" [autoResize]="true" style="height: 290px"></div>
        </div>
      </div>
      <div class="card mb-4">
        <div class="card-body pb-0">
          <div class="ul-widget__head __g-support v-margin">
            <div class="ul-widget__head-label">
              <div class="card-title">{{'das.topBranch' | translate}}</div>
            </div>
          </div>
          <div class="ul-widget__body">
            <div class="ul-widget6">
              <div class="ul-widget6__head">
                <div class="ul-widget6__item">
                  <span class="header-tbl">{{'das.branchName' | translate}}</span><span
                    class="header-tbl text-center">{{'das.rat' | translate}}</span>
                  <span class="header-tbl text-center">{{'das.totalAppo' | translate}}</span>

                </div>
              </div>
              <div class="ul-widget6__body">
                <div class="ul-widget6__item" *ngFor="let item of dashboardData?.top_five_branch">
                  <span class="text-capitalize">{{item?.branch?.name}}</span>
                  <span class="text-center"><i class="fa fa-star"></i>{{item?.branch?.avgRatting}}</span>
                  <span class="text-center">{{item?.total}}</span>

                </div>
                <div class="text-center" *ngIf="dashboardData?.top_five_branch?.length == 0">
                  <img src="./assets/images/NoData.png" alt="">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-6 col-md-12">
      <div class="card mb-4">
        <div class="card-body">
          <div class="card-title mb-0 pb-3 border-bottom">{{'das.recentBy' | translate}}</div>
          <div class="d-flex align-items-center border-bottom-dotted-dim"
            *ngFor="let item of dashboardData?.sub_sales_last">
            <img class="avatar-md rounded mr-3" src="{{item?.owner?.imageUri}}" alt="" />
            <div class="d-flex align-items-center w-100 pt-4 pb-4" style="border-bottom: 1px dashed #aaa">
              <div class="flex-grow-1">
                <h5 class="m-0 mb-1">{{item?.owner?.name}}</h5>
                <p class="m-0 text-small subscription-box gold-box">
                  {{item?.ava_day}} {{'das.day' | translate}} {{item?.subscription?.name}}
                </p>
              </div>
              <div>{{settingData}}{{item?.price}}</div>
            </div>
          </div>
          <div class="text-center p-3" *ngIf="dashboardData?.sub_sales_last?.length == 0">
            <img class="img" src="./assets/images/NoData.png" alt="">
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-lg-12 col-md-12">
    <div class="card mb-4">
      <div class="card-body">
        <div class="card-title mb-2">{{'das.monthly' | translate}}</div>
        <div echarts [options]="salesChartBar" [autoResize]="true" style="height: 300px"></div>
      </div>
    </div>
  </div>

  <div class="row mb-2">
    <div class="col-xl-6 col-lg-6 col-md-12 mb-4">
    </div>
    <div class="col-lg-6 col-md-12">
    </div>
  </div>
</div>